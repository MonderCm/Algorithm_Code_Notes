[P3406 海底高铁 - 洛谷](https://www.luogu.com.cn/problem/P3406)

这道题主播是$(*￣(oo)￣)$鼻，理解错了题目意思，在纸上画大半天浪费了大量时间，我理解的意思是假如一个起点为l=3,终点r=7,我的理解是直接从3->7，没有中间途径的火车站点3->4->5->6->7，这样犯蠢了，怪不得我怎么画钱都不对头，火车也不能飞啊呜呜呜~

**一眼丁真:鉴定为不愿动脑，训少了!**

下面讲解代码部分~

这道题也是非常典型的==差分标记数组==,差分标记数组记录的是每个站点经过的次数,因为题目算的是从**起点l**->**终点r**至少要花多少钱，因此跟从l->r的先后顺序无关，只跟经过站点经过的次数有关
**而pre[i]数组就是记录相邻站点经过的次数，什么意思?**
=>==比如pre[1]表示的就是站点1->站点2的次数，简单来说pre[i]表示的是相邻站点(连续)的次数==

这道题重要的部分就在于==-1==部分的理解了

```cpp
cin >> N >> M;//N表示经过的城市个数，M表示经过站点的先后顺序
vector<int> p(M + 1,0);  
for(int i = 1; i <= M; i++){  
    cin >> p[i];  
}  
vector<int> diff(N + 2,0);  
for(int i = 1; i < M; i++){  
    int u = min(p[i],p[i + 1]);//需要注意的是差分标记数组是对区间进行操作，因此下标小的那个在前面  
    int v = max(p[i],p[i + 1]) - 1;//v代表终止站点，-1的目的是保证终站点的正确，加入p[i+1]=5,意思是从4~5站点，终止站点就是4,因此是diff[v+1]也就是diff[5]--，也就是防止4站点对后面站点的影响
    diff[u]++;  
    diff[v + 1]--;  
}  
  
vector<int> pre(N + 1,0);  
for(int i = 1; i <= N; i++){  
    pre[i] = pre[i - 1] + diff[i];  
}  
int ans = 0;  
for(int i = 1; i < N; i++){//for循环为什么只到N-1?因为N是最后一个车站，没有后续车站可以到达  
    int a, b, c;  
    cin >> a >> b >> c;  
    ans += min(pre[i] * a,pre[i] * b + c);//贪心算最少需要的钱  
}  
cout << ans << endl;

```
**复杂度分析**
- **时间复杂度**​：O(M + N)，处理差分数组和前缀和的时间复杂度均为线性。
- ​**空间复杂度**​：O(N)，使用差分数组和前缀和数组存储中间结果。
